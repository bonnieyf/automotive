<!DOCTYPE html>
<html lang="en" class="map-home">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Getac | Automotive Virtual Exhibition - Map</title>
    <link rel="shortcut icon" href="../favicon.ico" type=image/x-icon>
    <link rel="apple-touch-icon" href="../apple-touch-icon.png">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600&family=Oswald:wght@200;400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./../js.lib/bootstrap/bootstrap.min.css">
    <link rel="stylesheet" href="./../js.lib/swiper/swiper-bundle.min.css">
    <link rel="stylesheet" href="./../js.lib/fontawesome/all.css">
    <link rel="stylesheet" href="./../css/web.css" />
    <link rel="stylesheet" href="./assets/unity_web.css" />
    //- <script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.4.0/dist/lazyload.min.js"></script>
    script(src="./js/UnityLoader.js")
    script.
      (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-PPTKG64');
    
  
  </head>
  <body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PPTKG64" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    
      
    .map-wrap
      include _header
      .unity-map-container
        .bg
          .unity-map-slogan
            h2.title(data-i18n="mapTitle") AUTOMOTIVE VIRTUAL EXHIBITION
            p.txt(data-i18n="mapDesc") Take a walk through our virtual exhibition to see how rugged mobile solutions can drive a smarter approach throughout the Automotive value-chain.
      
      .unity-map-overlay
      .unity-map-bg
        .base-bg
        .unity-map--screen.screen3
          .bg.normal
          .bg.light

        .unity-map--screen.screen4
          .bg.normal
          .bg.light
          
        .unity-map--screen.screen2
          .bg.normal
          .bg.light
          
        .unity-map--screen.screen1
          .bg.normal
          .bg.light

        .unity-map-hover

          div.unity-map-hover-screen.screen3#menu-manufacturing(data-href="./manufacturing_factory/")
            .titlebox
              span.title-icon
                img(src="./assets/icon_menu_manufacturing.svg", alt="")
              span.title(data-i18n="ShowRoomScene4") Automotive Manufacturing
              span.more Visit

          div.unity-map-hover-screen.screen4#menu-rd(data-href="./engineering_lab/")
            .titlebox
              span.title-icon
                img(src="./assets/icon_menu_rd.svg", alt="")
              span.title(data-i18n="ShowRoomScene5") R&D and Engineering
              span.more Visit

          
          div.unity-map-hover-screen.screen2#menu-warehouse(data-href="./warehouse/")
            .titlebox
              span.title-icon
                img(src="./assets/icon_menu_warehouse.svg", alt="")
              span.title(data-i18n="ShowRoomScene3") Warehouse
              span.more Visit

          div.unity-map-hover-screen.screen1#menu-workshop(data-href="./aftersales_workshop/")
            .titlebox
              span.title-icon
                img(src="./assets/icon_menu_workshop.svg", alt="")
              span.title(data-i18n="ShowRoomScene2") Workshop
              span.more Visit

          
        .unity-map-copyright 
          p Â© 2021 GETAC. All Rights Reserved.

    
    #unityLoad1.unityload
    #unityLoad2.unityload
    #unityLoad3.unityload
    #unityLoad4.unityload

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.7.1/gsap.min.js"></script>
    <script src="./../js.lib/jquery-3.6.0.min.js"></script>
    <script src="./../js.lib/popper.min.js"></script>
    <script src="./../js.lib/bootstrap/bootstrap.min.js"></script>
    script(src="https://cdnjs.cloudflare.com/ajax/libs/i18next/20.4.0/i18next.min.js") 
    <script src="./js/functions.js"></script>
    script(src="./js/indexDetectLang.js")
    script(src="./js/mapIndex.js")
    script.
      let unityInstance;
      const unityPromise = (id,url) =>{
        return new Promise((resolve, reject)=>{
            setTimeout(()=>{
              
            },500)
            unityInstance = UnityLoader.instantiate(id, url,{
              Module:{
                'onRuntimeInitialized': function(){
                  unityInstance.Quit();
                  unityInstance = null;
                  resolve('ok')
                }
              }
            })
        })
      }

      function IsPC (){
        unityInstance.SendMessage("Man", "SendToUnity", 'false');
      }

      let room1 = ()=>{
        return unityPromise('unityLoad1',"aftersales_workshop/Build/aftersales_workshop.json")
      }

      let room2 = ()=>{
        return unityPromise('unityLoad2',"engineering_lab/Build/engineering_lab.json")
      }

      let room3 = ()=>{
        return unityPromise('unityLoad3',"manufacturing_factory/Build/manufacturing_factory.json")
      }

      let room4 = ()=>{
        return unityPromise('unityLoad4',"warehouse/Build/warehouse.json")
      }


      const orderPromise = async (ajxArr) => {
        for(let aj of ajxArr){
          const data = await aj()
        }
        return
      }

      orderPromise([room1,room2,room3,room4]).then(res => {
        document.querySelectorAll('.unityload').forEach(item=>item.remove())
      });
  </body>
</html>
